(function(y,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(y=typeof globalThis<"u"?globalThis:y||self,n(y["vue-leaflet"]={},y.Vue))})(this,function(y,n){"use strict";const te=(e,o)=>{for(const t of Object.keys(o))e.on(t,o[t])},oe=e=>{for(const o of Object.keys(e)){const t=e[o];t&&w(t.cancel)&&t.cancel()}},Ge=e=>!e||typeof e.charAt!="function"?e:e.charAt(0).toUpperCase()+e.slice(1),w=e=>typeof e=="function",h=(e,o,t)=>{for(const r in t){const s="set"+Ge(r);e[s]?n.watch(()=>t[r],(a,i)=>{e[s](a,i)}):o[s]&&n.watch(()=>t[r],a=>{o[s](a)})}},L=(e,o,t={})=>{const r={...t};for(const s in e){const a=o[s],i=e[s];a&&(a&&a.custom===!0||i!==void 0&&(r[s]=i))}return r},S=e=>{const o={},t={};for(const r in e)if(r.startsWith("on")&&!r.startsWith("onUpdate")&&r!=="onReady"){const s=r.slice(2).toLocaleLowerCase();o[s]=e[r]}else t[r]=e[r];return{listeners:o,attrs:t}},ze=async e=>{const o=await Promise.all([import("leaflet/dist/images/marker-icon-2x.png"),import("leaflet/dist/images/marker-icon.png"),import("leaflet/dist/images/marker-shadow.png")]);delete e.Default.prototype._getIconUrl,e.Default.mergeOptions({iconRetinaUrl:o[0].default,iconUrl:o[1].default,shadowUrl:o[2].default})},E=e=>{const o=n.ref((...r)=>console.warn(`Method ${e} has been invoked without being replaced`)),t=(...r)=>o.value(...r);return t.wrapped=o,n.provide(e,t),t},H=(e,o)=>e.wrapped.value=o,b=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,m=e=>{const o=n.inject(e);if(o===void 0)throw new Error(`Attempt to inject ${e.description} before it was provided.`);return o},nt=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:b,assertInject:m,bindEventHandlers:te,cancelDebounces:oe,capitalizeFirstLetter:Ge,isFunction:w,propsBinder:h,propsToLeafletOptions:L,provideLeafletWrapper:E,remapEvents:S,resetWebpackIcon:ze,updateLeafletWrapper:H},Symbol.toStringTag,{value:"Module"})),v=Symbol("useGlobalLeaflet"),_=Symbol("addLayer"),W=Symbol("removeLayer"),z=Symbol("registerControl"),ne=Symbol("registerLayerControl"),re=Symbol("canSetParentHtml"),ae=Symbol("setParentHtml"),se=Symbol("setIcon"),le=Symbol("bindPopup"),ie=Symbol("bindTooltip"),ce=Symbol("unbindPopup"),de=Symbol("unbindTooltip"),rt=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:_,BindPopupInjection:le,BindTooltipInjection:ie,CanSetParentHtmlInjection:re,RegisterControlInjection:z,RegisterLayerControlInjection:ne,RemoveLayerInjection:W,SetIconInjection:se,SetParentHtmlInjection:ae,UnbindPopupInjection:ce,UnbindTooltipInjection:de,UseGlobalLeafletInjection:v},Symbol.toStringTag,{value:"Module"})),N={options:{type:Object,default:()=>({}),custom:!0}},$=e=>({options:e.options,methods:{}}),at=Object.freeze(Object.defineProperty({__proto__:null,componentProps:N,setupComponent:$},Symbol.toStringTag,{value:"Module"})),A={...N,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},U=(e,o,t)=>{const r=m(_),s=m(W),{options:a,methods:i}=$(e),l=L(e,A,a),c=()=>r({leafletObject:o.value}),d=()=>s({leafletObject:o.value}),u={...i,setAttribution(f){d(),o.value.options.attribution=f,e.visible&&c()},setName(){d(),e.visible&&c()},setLayerType(){d(),e.visible&&c()},setVisible(f){o.value&&(f?c():d())},bindPopup(f){if(!o.value||!w(o.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}o.value.bindPopup(f)},bindTooltip(f){if(!o.value||!w(o.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}o.value.bindTooltip(f)},unbindTooltip(){o.value&&(w(o.value.closeTooltip)&&o.value.closeTooltip(),w(o.value.unbindTooltip)&&o.value.unbindTooltip())},unbindPopup(){o.value&&(w(o.value.closePopup)&&o.value.closePopup(),w(o.value.unbindPopup)&&o.value.unbindPopup())},updateVisibleProp(f){t.emit("update:visible",f)}};return n.provide(le,u.bindPopup),n.provide(ie,u.bindTooltip),n.provide(ce,u.unbindPopup),n.provide(de,u.unbindTooltip),n.onUnmounted(()=>{u.unbindPopup(),u.unbindTooltip(),d()}),{options:l,methods:u}},M=(e,o)=>{if(e&&o.default)return n.h("div",{style:{display:"none"}},o.default())},st=Object.freeze(Object.defineProperty({__proto__:null,layerProps:A,render:M,setupLayer:U},Symbol.toStringTag,{value:"Module"})),ue={...A,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Ne=(e,o,t)=>{const{options:r,methods:s}=U(e,o,t);return{options:L(e,ue,r),methods:s}},lt=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:ue,setupInteractiveLayer:Ne},Symbol.toStringTag,{value:"Module"})),Q={...ue,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},pe=(e,o,t)=>{const{options:r,methods:s}=Ne(e,o,t),a=L(e,Q,r),i=m(W),l={...s,setStroke(c){o.value.setStyle({stroke:c})},setColor(c){o.value.setStyle({color:c})},setWeight(c){o.value.setStyle({weight:c})},setOpacity(c){o.value.setStyle({opacity:c})},setLineCap(c){o.value.setStyle({lineCap:c})},setLineJoin(c){o.value.setStyle({lineJoin:c})},setDashArray(c){o.value.setStyle({dashArray:c})},setDashOffset(c){o.value.setStyle({dashOffset:c})},setFill(c){o.value.setStyle({fill:c})},setFillColor(c){o.value.setStyle({fillColor:c})},setFillOpacity(c){o.value.setStyle({fillOpacity:c})},setFillRule(c){o.value.setStyle({fillRule:c})},setClassName(c){o.value.setStyle({className:c})}};return n.onBeforeUnmount(()=>{i({leafletObject:o.value})}),{options:a,methods:l}},it=Object.freeze(Object.defineProperty({__proto__:null,pathProps:Q,setupPath:pe},Symbol.toStringTag,{value:"Module"})),V={...Q,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},ye=(e,o,t)=>{const{options:r,methods:s}=pe(e,o,t),a=L(e,V,r),i={...s,setRadius(l){o.value.setRadius(l)},setLatLng(l){o.value.setLatLng(l)}};return{options:a,methods:i}},ct=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:V,setupCircleMarker:ye},Symbol.toStringTag,{value:"Module"})),me={...V,radius:{type:Number}},$e=(e,o,t)=>{const{options:r,methods:s}=ye(e,o,t),a=L(e,me,r),i={...s};return{options:a,methods:i}},dt=Object.freeze(Object.defineProperty({__proto__:null,circleProps:me,setupCircle:$e},Symbol.toStringTag,{value:"Module"})),ut=n.defineComponent({name:"LCircle",props:me,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=$e(e,t,o);return n.onMounted(async()=>{const{circle:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.latLng,i));const{listeners:d}=S(o.attrs);t.value.on(d),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),pt=n.defineComponent({name:"LCircleMarker",props:V,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=ye(e,t,o);return n.onMounted(async()=>{const{circleMarker:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.latLng,i));const{listeners:d}=S(o.attrs);t.value.on(d),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),G={...N,position:{type:String}},D=(e,o)=>{const{options:t,methods:r}=$(e),s=L(e,G,t),a={...r,setPosition(i){o.value&&o.value.setPosition(i)}};return n.onUnmounted(()=>{o.value&&o.value.remove()}),{options:s,methods:a}},Ue=e=>e.default?n.h("div",{ref:"root"},e.default()):null,yt=Object.freeze(Object.defineProperty({__proto__:null,controlProps:G,renderLControl:Ue,setupControl:D},Symbol.toStringTag,{value:"Module"})),mt=n.defineComponent({name:"LControl",props:{...G,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(e,o){const t=n.ref(),r=n.ref(),s=n.inject(v),a=m(z),{options:i,methods:l}=D(e,t);return n.onMounted(async()=>{const{Control:c,DomEvent:d}=s?b.L:await import("leaflet/dist/leaflet-src.esm"),u=c.extend({onAdd(){return r.value}});t.value=n.markRaw(new u(i)),h(l,t.value,e),a({leafletObject:t.value}),e.disableClickPropagation&&r.value&&d.disableClickPropagation(r.value),e.disableScrollPropagation&&r.value&&d.disableScrollPropagation(r.value),n.nextTick(()=>o.emit("ready",t.value))}),{root:r,leafletObject:t}},render(){return Ue(this.$slots)}}),fe={...G,prefix:{type:String}},De=(e,o)=>{const{options:t,methods:r}=D(e,o),s=L(e,fe,t),a={...r,setPrefix(i){o.value.setPrefix(i)}};return{options:s,methods:a}},ft=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:fe,setupControlAttribution:De},Symbol.toStringTag,{value:"Module"})),bt=n.defineComponent({name:"LControlAttribution",props:fe,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(z),{options:a,methods:i}=De(e,t);return n.onMounted(async()=>{const{control:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.attribution(a)),h(i,t.value,e),s({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),be={...G,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Fe=(e,o)=>{const{options:t}=D(e,o);return{options:L(e,be,t),methods:{addLayer(a){a.layerType==="base"?o.value.addBaseLayer(a.leafletObject,a.name):a.layerType==="overlay"&&o.value.addOverlay(a.leafletObject,a.name)},removeLayer(a){o.value.removeLayer(a.leafletObject)}}}},gt=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:be,setupControlLayers:Fe},Symbol.toStringTag,{value:"Module"})),Lt=n.defineComponent({name:"LControlLayers",props:be,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(ne),{options:a,methods:i}=Fe(e,t);return n.onMounted(async()=>{const{control:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.layers(void 0,void 0,a)),h(i,t.value,e),s({...e,...i,leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),ge={...G,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Ze=(e,o)=>{const{options:t,methods:r}=D(e,o);return{options:L(e,ge,t),methods:r}},ht=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:ge,setupControlScale:Ze},Symbol.toStringTag,{value:"Module"})),vt=n.defineComponent({name:"LControlScale",props:ge,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(z),{options:a,methods:i}=Ze(e,t);return n.onMounted(async()=>{const{control:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.scale(a)),h(i,t.value,e),s({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),Le={...G,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Ee=(e,o)=>{const{options:t,methods:r}=D(e,o);return{options:L(e,Le,t),methods:r}},Ot=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Le,setupControlZoom:Ee},Symbol.toStringTag,{value:"Module"})),jt=n.defineComponent({name:"LControlZoom",props:Le,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(z),{options:a,methods:i}=Ee(e,t);return n.onMounted(async()=>{const{control:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.zoom(a)),h(i,t.value,e),s({leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),J={...A},X=(e,o,t)=>{const{options:r,methods:s}=U(e,o,t),a=L(e,J,r),i={...s,addLayer(l){o.value.addLayer(l.leafletObject)},removeLayer(l){o.value.removeLayer(l.leafletObject)}};return n.provide(_,i.addLayer),n.provide(W,i.removeLayer),{options:a,methods:i}},St=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:J,setupLayerGroup:X},Symbol.toStringTag,{value:"Module"})),he={...J},He=(e,o,t)=>{const{options:r,methods:s}=X(e,o,t),a=L(e,he,r),i={...s};return{options:a,methods:i}},_t=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:he,setupFeatureGroup:He},Symbol.toStringTag,{value:"Module"})),Tt=n.defineComponent({props:he,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{methods:i,options:l}=He(e,t,o);return n.onMounted(async()=>{const{featureGroup:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(void 0,l));const{listeners:d}=S(o.attrs);t.value.on(d),h(i,t.value,e),a({...e,...i,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),ve={...J,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},We=(e,o,t)=>{const{options:r,methods:s}=X(e,o,t),a=L(e,ve,r);Object.prototype.hasOwnProperty.call(e,"optionsStyle")&&(a.style=e.optionsStyle);const i={...s,setGeojson(l){o.value.clearLayers(),o.value.addData(l)},setOptionsStyle(l){o.value.setStyle(l)},getGeoJSONData(){return o.value.toGeoJSON()},getBounds(){return o.value.getBounds()}};return{options:a,methods:i}},Ct=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:ve,setupGeoJSON:We},Symbol.toStringTag,{value:"Module"})),Pt=n.defineComponent({props:ve,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{methods:i,options:l}=We(e,t,o);return n.onMounted(async()=>{const{geoJSON:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.geojson,l));const{listeners:d}=S(o.attrs);t.value.on(d),h(i,t.value,e),a({...e,...i,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Y={...A,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Oe=(e,o,t)=>{const{options:r,methods:s}=U(e,o,t),a=L(e,Y,r),i={...s,setTileComponent(){var l;(l=o.value)==null||l.redraw()}};return n.onUnmounted(()=>{o.value.off()}),{options:a,methods:i}},Je=(e,o,t,r)=>e.extend({initialize(s){this.tileComponents={},this.on("tileunload",this._unloadTile),t.setOptions(this,s)},createTile(s){const a=this._tileCoordsToKey(s);this.tileComponents[a]=o.create("div");const i=n.h({setup:r,props:["coords"]},{coords:s});return n.render(i,this.tileComponents[a]),this.tileComponents[a]},_unloadTile(s){const a=this._tileCoordsToKey(s.coords);this.tileComponents[a]&&(this.tileComponents[a].innerHTML="",this.tileComponents[a]=void 0)}}),Mt=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Je,gridLayerProps:Y,setupGridLayer:Oe},Symbol.toStringTag,{value:"Module"})),wt=n.defineComponent({props:{...Y,childRender:{type:Function,required:!0}},setup(e,o){const t=n.ref(),r=n.ref(null),s=n.ref(!1),a=n.inject(v),i=m(_),{options:l,methods:c}=Oe(e,t,o);return n.onMounted(async()=>{const{GridLayer:d,DomUtil:u,Util:f}=a?b.L:await import("leaflet/dist/leaflet-src.esm"),C=Je(d,u,f,e.childRender);t.value=n.markRaw(new C(l));const{listeners:g}=S(o.attrs);t.value.on(g),h(c,t.value,e),i({...e,...c,leafletObject:t.value}),s.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{root:r,ready:s,leafletObject:t}},render(){return this.ready?n.h("div",{style:{display:"none"},ref:"root"}):null}}),je={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},kt=Object.freeze(Object.defineProperty({__proto__:null,iconProps:je},Symbol.toStringTag,{value:"Module"})),Bt=n.defineComponent({name:"LIcon",props:{...je,...N},setup(e,o){const t=n.ref(),r=n.inject(v),s=m(re),a=m(ae),i=m(se);let l,c,d,u,f;const C=(B,O,T)=>{const P=B&&B.innerHTML;if(!O){T&&f&&s()&&a(P);return}const{listeners:Z}=S(o.attrs);f&&c(f,Z);const{options:Ae}=$(e),I=L(e,je,Ae);P&&(I.html=P),f=I.html?d(I):u(I),l(f,Z),i(f)},g=()=>{n.nextTick(()=>C(t.value,!0,!1))},k=()=>{n.nextTick(()=>C(t.value,!1,!0))},F={setIconUrl:g,setIconRetinaUrl:g,setIconSize:g,setIconAnchor:g,setPopupAnchor:g,setTooltipAnchor:g,setShadowUrl:g,setShadowRetinaUrl:g,setShadowAnchor:g,setBgPos:g,setClassName:g,setHtml:g};return n.onMounted(async()=>{const{DomEvent:B,divIcon:O,icon:T}=r?b.L:await import("leaflet/dist/leaflet-src.esm");l=B.on,c=B.off,d=O,u=T,h(F,{},e),new MutationObserver(k).observe(t.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),g()}),{root:t}},render(){const e=this.$slots.default?this.$slots.default():void 0;return n.h("div",{ref:"root"},e)}}),Se={...A,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},qe=(e,o,t)=>{const{options:r,methods:s}=U(e,o,t),a=L(e,Se,r),i={...s,setOpacity(l){return o.value.setOpacity(l)},setUrl(l){return o.value.setUrl(l)},setBounds(l){return o.value.setBounds(l)},getBounds(){return o.value.getBounds()},getElement(){return o.value.getElement()},bringToFront(){return o.value.bringToFront()},bringToBack(){return o.value.bringToBack()},setZIndex(l){return o.value.setZIndex(l)}};return{options:a,methods:i}},It=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:Se,setupImageOverlay:qe},Symbol.toStringTag,{value:"Module"})),At=n.defineComponent({name:"LImageOverlay",props:Se,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=qe(e,t,o);return n.onMounted(async()=>{const{imageOverlay:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.url,e.bounds,i));const{listeners:d}=S(o.attrs);t.value.on(d),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Gt=n.defineComponent({props:J,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{methods:i}=X(e,t,o);return n.onMounted(async()=>{const{layerGroup:l}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l(void 0,e.options));const{listeners:c}=S(o.attrs);t.value.on(c),h(i,t.value,e),a({...e,...i,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}});function Ke(e,o,t){var r,s,a;o===void 0&&(o=50),t===void 0&&(t={});var i=(r=t.isImmediate)!=null&&r,l=(s=t.callback)!=null&&s,c=t.maxWait,d=Date.now(),u=[];function f(){if(c!==void 0){var g=Date.now()-d;if(g+o>=c)return c-g}return o}var C=function(){var g=[].slice.call(arguments),k=this;return new Promise(function(F,B){var O=i&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,d=Date.now(),!i){var P=e.apply(k,g);l&&l(P),u.forEach(function(Z){return(0,Z.resolve)(P)}),u=[]}},f()),O){var T=e.apply(k,g);return l&&l(T),F(T)}u.push({resolve:F,reject:B})})};return C.cancel=function(g){a!==void 0&&clearTimeout(a),u.forEach(function(k){return(0,k.reject)(g)}),u=[]},C}const Re={...N,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},zt=n.defineComponent({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:Re,setup(e,o){const t=n.ref(),r=n.reactive({ready:!1,layersToAdd:[],layersInControl:[]}),{options:s}=$(e),a=L(e,Re,s),{listeners:i,attrs:l}=S(o.attrs),c=E(_),d=E(W),u=E(z),f=E(ne);n.provide(v,e.useGlobalLeaflet);const C=n.computed(()=>{const O={};return e.noBlockingAnimations&&(O.animate=!1),O}),g=n.computed(()=>{const O=C.value;return e.padding&&(O.padding=e.padding),e.paddingTopLeft&&(O.paddingTopLeft=e.paddingTopLeft),e.paddingBottomRight&&(O.paddingBottomRight=e.paddingBottomRight),O}),k={moveend:Ke(O=>{r.leafletRef&&(o.emit("update:zoom",r.leafletRef.getZoom()),o.emit("update:center",r.leafletRef.getCenter()),o.emit("update:bounds",r.leafletRef.getBounds()))}),overlayadd(O){const T=r.layersInControl.find(P=>P.name===O.name);T&&T.updateVisibleProp(!0)},overlayremove(O){const T=r.layersInControl.find(P=>P.name===O.name);T&&T.updateVisibleProp(!1)}};n.onMounted(async()=>{e.useGlobalLeaflet&&(b.L=b.L||await import("leaflet"));const{map:O,CRS:T,Icon:P,latLngBounds:Z,latLng:Ae,stamp:I}=e.useGlobalLeaflet?b.L:await import("leaflet/dist/leaflet-src.esm");try{a.beforeMapMount&&await a.beforeMapMount()}catch(p){console.error(`The following error occurred running the provided beforeMapMount hook ${p.message}`)}await ze(P);const no=typeof a.crs=="string"?T[a.crs]:a.crs;a.crs=no||T.EPSG3857;const K={addLayer(p){p.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd.push(p):r.layersInControl.find(R=>I(R.leafletObject)===I(p.leafletObject))||(r.layerControl.addLayer(p),r.layersInControl.push(p))),p.visible!==!1&&r.leafletRef.addLayer(p.leafletObject)},removeLayer(p){p.layerType!==void 0&&(r.layerControl===void 0?r.layersToAdd=r.layersToAdd.filter(j=>j.name!==p.name):(r.layerControl.removeLayer(p.leafletObject),r.layersInControl=r.layersInControl.filter(j=>I(j.leafletObject)!==I(p.leafletObject)))),r.leafletRef.removeLayer(p.leafletObject)},registerLayerControl(p){r.layerControl=p,r.layersToAdd.forEach(j=>{r.layerControl.addLayer(j)}),r.layersToAdd=[],u(p)},registerControl(p){r.leafletRef.addControl(p.leafletObject)},setZoom(p){const j=r.leafletRef.getZoom();p!==j&&r.leafletRef.setZoom(p,C.value)},setCrs(p){const j=r.leafletRef.getBounds();r.leafletRef.options.crs=p,r.leafletRef.fitBounds(j,{animate:!1,padding:[0,0]})},fitBounds(p){r.leafletRef.fitBounds(p,g.value)},setBounds(p){if(!p)return;const j=Z(p);if(!j.isValid())return;!(r.lastSetBounds||r.leafletRef.getBounds()).equals(j,0)&&(r.lastSetBounds=j,r.leafletRef.fitBounds(j))},setCenter(p){if(p==null)return;const j=Ae(p),R=r.lastSetCenter||r.leafletRef.getCenter();(R.lat!==j.lat||R.lng!==j.lng)&&(r.lastSetCenter=j,r.leafletRef.panTo(j,C.value))}};H(c,K.addLayer),H(d,K.removeLayer),H(u,K.registerControl),H(f,K.registerLayerControl),r.leafletRef=n.markRaw(O(t.value,a)),h(K,r.leafletRef,e),te(r.leafletRef,k),te(r.leafletRef,i),r.ready=!0,n.nextTick(()=>o.emit("ready",r.leafletRef))}),n.onBeforeUnmount(()=>{oe(k),r.leafletRef&&(r.leafletRef.off(),r.leafletRef.remove())});const F=n.computed(()=>r.leafletRef),B=n.computed(()=>r.ready);return{root:t,ready:B,leafletObject:F,attrs:l}},render({attrs:e}){return e.style||(e.style={}),e.style.width||(e.style.width="100%"),e.style.height||(e.style.height="100%"),n.h("div",{...e,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Nt=["Symbol(Comment)","Symbol(Text)"],$t=["LTooltip","LPopup"],_e={...A,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},Qe=(e,o,t)=>{const{options:r,methods:s}=U(e,o,t),a=L(e,_e,r),i={...s,setDraggable(l){o.value.dragging&&(l?o.value.dragging.enable():o.value.dragging.disable())},latLngSync(l){t.emit("update:latLng",l.latlng),t.emit("update:lat-lng",l.latlng)},setLatLng(l){if(l!=null&&o.value){const c=o.value.getLatLng();(!c||!c.equals(l))&&o.value.setLatLng(l)}}};return{options:a,methods:i}},Ve=(e,o)=>{const t=o.slots.default&&o.slots.default();return t&&t.length&&t.some(Ut)};function Ut(e){return!(Nt.includes(e.type.toString())||$t.includes(e.type.name))}const Dt=Object.freeze(Object.defineProperty({__proto__:null,markerProps:_e,setupMarker:Qe,shouldBlankIcon:Ve},Symbol.toStringTag,{value:"Module"})),Ft=n.defineComponent({name:"LMarker",props:_e,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_);n.provide(re,()=>{var d;return!!((d=t.value)!=null&&d.getElement())}),n.provide(ae,d=>{var f,C;const u=w((f=t.value)==null?void 0:f.getElement)&&((C=t.value)==null?void 0:C.getElement());u&&(u.innerHTML=d)}),n.provide(se,d=>{var u;return((u=t.value)==null?void 0:u.setIcon)&&t.value.setIcon(d)});const{options:i,methods:l}=Qe(e,t,o),c={moveHandler:Ke(l.latLngSync)};return n.onMounted(async()=>{const{marker:d,divIcon:u}=s?b.L:await import("leaflet/dist/leaflet-src.esm");Ve(i,o)&&(i.icon=u({className:""})),t.value=n.markRaw(d(e.latLng,i));const{listeners:f}=S(o.attrs);t.value.on(f),t.value.on("move",c.moveHandler),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),n.onBeforeUnmount(()=>oe(c)),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),x={...Q,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Te=(e,o,t)=>{const{options:r,methods:s}=pe(e,o,t),a=L(e,x,r),i={...s,setSmoothFactor(l){o.value.setStyle({smoothFactor:l})},setNoClip(l){o.value.setStyle({noClip:l})},addLatLng(l){o.value.addLatLng(l)}};return{options:a,methods:i}},Zt=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:x,setupPolyline:Te},Symbol.toStringTag,{value:"Module"})),q={...x},Ce=(e,o,t)=>{const{options:r,methods:s}=Te(e,o,t),a=L(e,q,r),i={...s,toGeoJSON(l){return o.value.toGeoJSON(l)}};return{options:a,methods:i}},Et=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:q,setupPolygon:Ce},Symbol.toStringTag,{value:"Module"})),Ht=n.defineComponent({name:"LPolygon",props:q,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=Ce(e,t,o);return n.onMounted(async()=>{const{polygon:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.latLngs,i));const{listeners:d}=S(o.attrs);t.value.on(d),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Wt=n.defineComponent({name:"LPolyline",props:x,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=Te(e,t,o);return n.onMounted(async()=>{const{polyline:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(e.latLngs,i));const{listeners:d}=S(o.attrs);t.value.on(d),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),Pe={...N,content:{type:String,default:null}},Me=(e,o)=>{const{options:t,methods:r}=$(e),s={...r,setContent(a){o.value&&a!==null&&a!==void 0&&o.value.setContent(a)}};return{options:t,methods:s}},we=e=>e.default?n.h("div",{ref:"root"},e.default()):null,Jt=Object.freeze(Object.defineProperty({__proto__:null,popperProps:Pe,render:we,setupPopper:Me},Symbol.toStringTag,{value:"Module"})),Xe={...Pe,latLng:{type:[Object,Array],default:()=>[]}},Ye=(e,o)=>{const{options:t,methods:r}=Me(e,o);return{options:t,methods:r}},qt=Object.freeze(Object.defineProperty({__proto__:null,popupProps:Xe,setupPopup:Ye},Symbol.toStringTag,{value:"Module"})),Kt=n.defineComponent({name:"LPopup",props:Xe,setup(e,o){const t=n.ref(),r=n.ref(null),s=n.inject(v),a=m(le),i=m(ce),{options:l,methods:c}=Ye(e,t);return n.onMounted(async()=>{const{popup:d}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(d(l)),e.latLng!==void 0&&t.value.setLatLng(e.latLng),h(c,t.value,e);const{listeners:u}=S(o.attrs);t.value.on(u),t.value.setContent(e.content||r.value||""),a(t.value),n.nextTick(()=>o.emit("ready",t.value))}),n.onBeforeUnmount(()=>{i()}),{root:r,leafletObject:t}},render(){return we(this.$slots)}}),ke={...q,latLngs:{...q.latLngs,required:!1},bounds:{type:Object,custom:!0}},xe=(e,o,t)=>{const{options:r,methods:s}=Ce(e,o,t),a=L(e,ke,r),i={...s,setBounds(l){o.value.setBounds(l)},setLatLngs(l){o.value.setBounds(l)}};return{options:a,methods:i}},Rt=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:ke,setupRectangle:xe},Symbol.toStringTag,{value:"Module"})),Qt=n.defineComponent({name:"LRectangle",props:ke,setup(e,o){const t=n.ref(),r=n.ref(!1),s=n.inject(v),a=m(_),{options:i,methods:l}=xe(e,t,o);return n.onMounted(async()=>{const{rectangle:c,latLngBounds:d}=s?b.L:await import("leaflet/dist/leaflet-src.esm"),u=e.bounds?d(e.bounds):d(e.latLngs||[]);t.value=n.markRaw(c(u,i));const{listeners:f}=S(o.attrs);t.value.on(f),h(l,t.value,e),a({...e,...l,leafletObject:t.value}),r.value=!0,n.nextTick(()=>o.emit("ready",t.value))}),{ready:r,leafletObject:t}},render(){return M(this.ready,this.$slots)}}),ee={...Y,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:e=>typeof e=="string"?!0:Array.isArray(e)?e.every(o=>typeof o=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},Be=(e,o,t)=>{const{options:r,methods:s}=Oe(e,o,t),a=L(e,ee,r),i={...s};return{options:a,methods:i}},Vt=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:Be,tileLayerProps:ee},Symbol.toStringTag,{value:"Module"})),Xt=n.defineComponent({props:ee,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(_),{options:a,methods:i}=Be(e,t,o);return n.onMounted(async()=>{const{tileLayer:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l(e.url,a));const{listeners:c}=S(o.attrs);t.value.on(c),h(i,t.value,e),s({...e,...i,leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),et={...Pe},tt=(e,o)=>{const{options:t,methods:r}=Me(e,o),s=m(de);return n.onBeforeUnmount(()=>{s()}),{options:t,methods:r}},Yt=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:tt,tooltipProps:et},Symbol.toStringTag,{value:"Module"})),xt=n.defineComponent({name:"LTooltip",props:et,setup(e,o){const t=n.ref(),r=n.ref(null),s=n.inject(v),a=m(ie),{options:i,methods:l}=tt(e,t);return n.onMounted(async()=>{const{tooltip:c}=s?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(c(i)),h(l,t.value,e);const{listeners:d}=S(o.attrs);t.value.on(d),t.value.setContent(e.content||r.value||""),a(t.value),n.nextTick(()=>o.emit("ready",t.value))}),{root:r,leafletObject:t}},render(){return we(this.$slots)}}),Ie={...ee,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},ot=(e,o,t)=>{const{options:r,methods:s}=Be(e,o,t);return{options:L(e,Ie,r),methods:{...s}}},eo=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:ot,wmsTileLayerProps:Ie},Symbol.toStringTag,{value:"Module"})),to=n.defineComponent({props:Ie,setup(e,o){const t=n.ref(),r=n.inject(v),s=m(_),{options:a,methods:i}=ot(e,t,o);return n.onMounted(async()=>{const{tileLayer:l}=r?b.L:await import("leaflet/dist/leaflet-src.esm");t.value=n.markRaw(l.wms(e.url,a));const{listeners:c}=S(o.attrs);t.value.on(c),h(i,t.value,e),s({...e,...i,leafletObject:t.value}),n.nextTick(()=>o.emit("ready",t.value))}),{leafletObject:t}},render(){return null}}),oo=Object.freeze(Object.defineProperty({__proto__:null,Circle:dt,CircleMarker:ct,Component:at,Control:yt,ControlAttribution:ft,ControlLayers:gt,ControlScale:ht,ControlZoom:Ot,FeatureGroup:_t,GeoJSON:Ct,GridLayer:Mt,Icon:kt,ImageOverlay:It,InteractiveLayer:lt,Layer:st,LayerGroup:St,Marker:Dt,Path:it,Polygon:Et,Polyline:Zt,Popper:Jt,Popup:qt,Rectangle:Rt,TileLayer:Vt,Tooltip:Yt,WmsTileLayer:eo},Symbol.toStringTag,{value:"Module"}));y.Functions=oo,y.InjectionKeys=rt,y.LCircle=ut,y.LCircleMarker=pt,y.LControl=mt,y.LControlAttribution=bt,y.LControlLayers=Lt,y.LControlScale=vt,y.LControlZoom=jt,y.LFeatureGroup=Tt,y.LGeoJson=Pt,y.LGridLayer=wt,y.LIcon=Bt,y.LImageOverlay=At,y.LLayerGroup=Gt,y.LMap=zt,y.LMarker=Ft,y.LPolygon=Ht,y.LPolyline=Wt,y.LPopup=Kt,y.LRectangle=Qt,y.LTileLayer=Xt,y.LTooltip=xt,y.LWmsTileLayer=to,y.Utilities=nt,Object.defineProperty(y,Symbol.toStringTag,{value:"Module"})});
